import{C as $,W as P,R as O}from"./index-NppE2dFj.js";function U(q){return new Promise((H,z)=>{const l=document.createElement("div");l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.width="100vw",l.style.height="100vh",l.style.background="rgba(30,32,34,0.85)",l.style.display="flex",l.style.alignItems="center",l.style.justifyContent="center",l.style.zIndex="9999";const i=document.createElement("div");i.style.width="min(96vw, 760px)",i.style.height="min(96vh, 520px)",i.style.minWidth="600px",i.style.minHeight="440px",i.style.background="linear-gradient(120deg, #232526 0%, #414345 100%)",i.style.borderRadius="20px",i.style.boxShadow="0 12px 48px rgba(0,0,0,0.55)",i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="stretch",i.style.justifyContent="flex-start",i.style.padding="0",i.style.overflow="hidden";const x=document.createElement("div");x.style.background="linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",x.style.padding="28px 0 18px 0",x.style.textAlign="center",x.style.color="#fff",x.style.fontSize="2.1rem",x.style.fontWeight="bold",x.style.letterSpacing="1px",x.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",x.textContent="New Game",i.appendChild(x);const h=document.createElement("div");h.style.display="flex",h.style.flex="1",h.style.flexDirection="row",h.style.gap="0",h.style.height="100%",h.style.background="none",i.appendChild(h);const f=document.createElement("div");f.style.flex="1.1",f.style.display="flex",f.style.flexDirection="column",f.style.alignItems="center",f.style.justifyContent="center",f.style.background="linear-gradient(135deg, #232526 0%, #232526 100%)",f.style.padding="36px 16px 24px 32px",f.style.borderRight="2px solid #333",h.appendChild(f);const c=document.createElement("div");c.style.width="300px",c.style.height="200px",c.style.background="#222",c.style.border="3px solid #666",c.style.borderRadius="14px",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.marginBottom="16px",c.style.position="relative",c.style.overflow="hidden",f.appendChild(c);const m=document.createElement("div");m.style.border="4px solid #f3f3f3",m.style.borderTop="4px solid #888",m.style.borderRadius="50%",m.style.width="36px",m.style.height="36px",m.style.animation="spin 1s linear infinite",m.style.position="absolute",m.style.left="calc(50% - 18px)",m.style.top="calc(50% - 18px)",c.appendChild(m);const o=document.createElement("button");o.textContent="Recreate Map";let D=0,C=null,E=null,w=null;function T(){D++,C&&C.terminate(),C=new Worker(new URL("/Armchair-General/assets/mapWorker-CdtsqhCa.js",import.meta.url),{type:"module"}),m.style.display="block",w&&c.removeChild(w);const p=D;C.onmessage=L=>{if(p!==D)return;const{map:y,countries:b}=L.data.result,t=b.map(s=>{const v=new $(s.name,s.owner,s.armies,s.income);return v.coordinates=s.coordinates,v.border=s.border,v.oceanBorder=s.oceanBorder,v.color=s.color,v}),e=new Map(t.map(s=>[s.name,s]));b.forEach((s,v)=>{t[v].neighbors=(s.neighbors||[]).map(N=>e.get(N.name)).filter(Boolean)});const G=Object.assign(Object.create(P.prototype),{map:y,countries:t});if(P.checkMapCountryConsistency(y,t)||console.warn("[WorldMap] Consistency check failed after reconstructing from worker!"),E=G,!E)throw new Error("WorldMap is null when rendering map preview.");w=O.render(E,[],[],!0),w.style.width="300px",w.style.height="200px",w.style.display="block",m.style.display="none",c.appendChild(w),C==null||C.terminate(),C=null},C.postMessage({type:"generate",width:1200,height:800,countryCount:40})}o.onclick=T,T(),o.style.margin="0 0 0 0",o.style.padding="10px 20px",o.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",o.style.color="#fff",o.style.border="none",o.style.borderRadius="8px",o.style.fontWeight="bold",o.style.fontSize="1rem",o.style.cursor="pointer",o.style.marginTop="4px",o.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",o.onmouseenter=()=>o.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",o.onmouseleave=()=>o.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",f.appendChild(o);const g=document.createElement("div");g.style.flex="1.5",g.style.display="flex",g.style.flexDirection="column",g.style.alignItems="stretch",g.style.justifyContent="flex-start",g.style.padding="36px 32px 24px 24px",h.appendChild(g);let k=[];const S=document.createElement("div");S.textContent="Players",S.style.fontWeight="bold",S.style.fontSize="1.1rem",S.style.color="#fff",S.style.marginBottom="8px",g.appendChild(S);const u=document.createElement("ul");u.style.listStyle="none",u.style.padding="0",u.style.margin="0 0 14px 0",u.style.background="rgba(36,40,44,0.93)",u.style.border="1px solid #333",u.style.borderRadius="8px",u.style.maxHeight="160px",u.style.overflowY="auto",u.style.boxShadow="0 2px 8px rgba(30,32,34,0.10)",g.appendChild(u);function R(){u.innerHTML="",k.forEach((p,L)=>{const y=document.createElement("li");y.style.display="flex",y.style.alignItems="center",y.style.marginBottom="6px",y.style.color="#fff",y.style.background="rgba(60,70,80,0.18)",y.style.borderRadius="6px",y.style.padding="6px 10px",y.style.boxShadow="0 1px 4px rgba(30,32,34,0.09)";const b=document.createElement("span");if(b.textContent=`${p.name}`,b.style.flex="1",b.style.cursor="pointer",b.style.fontWeight="bold",b.onclick=()=>{const e=document.createElement("input");e.type="text",e.value=p.name,e.style.flex="1",e.style.fontWeight="bold",e.style.fontSize="1.05rem",e.style.background="rgba(60,70,80,0.18)",e.style.color="#fff",e.style.border="none",e.style.borderBottom="2px solid #43cea2",e.style.outline="none",e.style.padding="2px 0",e.style.margin="0",e.style.borderRadius="0",e.style.transition="border-color 0.2s",e.autofocus=!0,e.style.fontSize="1.05rem",e.style.background="rgba(60,70,80,0.18)",e.style.color="#fff",e.style.border="none",e.style.borderBottom="2px solid #43cea2",e.style.outline="none",e.style.padding="2px 0",e.style.margin="0",e.style.borderRadius="0",e.style.transition="border-color 0.2s",e.autofocus=!0,y.replaceChild(e,b),e.focus(),e.select();function G(){const s=e.value.trim()||p.name;p.name=s,R(),H({map:E,players:k,showArmies:W.checked})}e.addEventListener("blur",G),e.addEventListener("keydown",s=>{s.key==="Enter"?e.blur():s.key==="Escape"&&R()})},y.appendChild(b),p.isAI){const e=document.createElement("span");e.textContent="AI",e.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",e.style.color="#fff",e.style.fontSize="0.85em",e.style.fontWeight="bold",e.style.borderRadius="3px",e.style.padding="2px 7px",e.style.marginLeft="8px",y.appendChild(e)}const t=document.createElement("button");t.textContent="âœ–",t.style.marginLeft="10px",t.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",t.style.border="none",t.style.borderRadius="4px",t.style.color="#fff",t.style.fontWeight="bold",t.style.cursor="pointer",t.style.padding="2px 8px",t.onmouseenter=()=>t.style.background="linear-gradient(90deg,#ffb74d 0%,#e57373 100%)",t.onmouseleave=()=>t.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",t.onclick=()=>{k.splice(L,1),R(),M()},y.appendChild(t),u.appendChild(y)})}const A=document.createElement("div");A.style.display="flex",A.style.gap="14px",A.style.marginBottom="18px",g.appendChild(A);const r=document.createElement("button");r.textContent="Add Human",r.style.flex="1",r.style.padding="8px 0",r.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",r.style.color="#fff",r.style.border="none",r.style.borderRadius="8px",r.style.fontWeight="bold",r.style.fontSize="1rem",r.style.cursor="pointer",r.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",r.onmouseenter=()=>r.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",r.onmouseleave=()=>r.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",r.onclick=()=>{k.push({name:`Human ${k.filter(p=>!p.isAI).length+1}`,isAI:!1}),R(),M()},A.appendChild(r);const a=document.createElement("button");a.textContent="Add AI",a.style.flex="1",a.style.padding="8px 0",a.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",a.style.color="#fff",a.style.border="none",a.style.borderRadius="8px",a.style.fontWeight="bold",a.style.fontSize="1rem",a.style.cursor="pointer",a.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",a.onmouseenter=()=>a.style.background="linear-gradient(90deg,#ff5e62 0%,#ff9966 100%)",a.onmouseleave=()=>a.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",a.onclick=()=>{k.push({name:`AI ${k.filter(p=>p.isAI).length+1}`,isAI:!0}),R(),M()},A.appendChild(a);const B=document.createElement("div");B.style.display="flex",B.style.gap="16px",B.style.marginTop="auto",g.appendChild(B);const n=document.createElement("button");n.textContent="Start Game",n.style.flex="2",n.style.padding="12px 0",n.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",n.style.color="#fff",n.style.border="none",n.style.borderRadius="8px",n.style.fontWeight="bold",n.style.fontSize="1.1rem",n.style.cursor="pointer",n.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",n.disabled=!0,n.onmouseenter=()=>n.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",n.onmouseleave=()=>n.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",B.appendChild(n);function M(){n.disabled=!1}n.onclick=()=>{!E||k.length<2||(document.body.removeChild(l),H({map:E,players:k,showArmies:W.checked}))};const d=document.createElement("button");d.textContent="Cancel",d.style.flex="1",d.style.padding="12px 0",d.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",d.style.color="#fff",d.style.border="none",d.style.borderRadius="8px",d.style.fontWeight="bold",d.style.fontSize="1.1rem",d.style.cursor="pointer",d.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",d.onmouseenter=()=>d.style.background="linear-gradient(90deg,#ffb74d 0%,#e57373 100%)",d.onmouseleave=()=>d.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",d.onclick=()=>{document.body.removeChild(l),z()},B.appendChild(d),l.onclick=p=>{p.target===l&&(document.body.removeChild(l),z())},document.addEventListener("keydown",function p(L){L.key==="Escape"&&(document.body.removeChild(l),document.removeEventListener("keydown",p),z())});const I=document.createElement("div");I.style.margin="12px 0 0 0",I.style.display="flex",I.style.alignItems="center";const W=document.createElement("input");W.type="checkbox",W.id="show-armies-checkbox",W.style.marginRight="8px";const j=document.createElement("label");j.htmlFor="show-armies-checkbox",j.textContent="Show Armies",I.appendChild(W),I.appendChild(j),g.appendChild(I),l.appendChild(i),document.body.appendChild(l),R(),M()})}export{U as showNewGameDialog};
