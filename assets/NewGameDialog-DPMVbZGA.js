import{C as U,W as O,R as Q}from"./index-DoZPQS0W.js";function _(V){return new Promise((j,I)=>{const s=document.createElement("div");s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100vw",s.style.height="100vh",s.style.background="rgba(30,32,34,0.85)",s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.zIndex="9999";const c=document.createElement("div");c.style.width="min(96vw, 760px)",c.style.height="min(96vh, 520px)",c.style.minWidth="600px",c.style.minHeight="440px",c.style.background="linear-gradient(120deg, #232526 0%, #414345 100%)",c.style.borderRadius="20px",c.style.boxShadow="0 12px 48px rgba(0,0,0,0.55)",c.style.display="flex",c.style.flexDirection="column",c.style.alignItems="stretch",c.style.justifyContent="flex-start",c.style.padding="0",c.style.overflow="hidden",c.style.fontFamily="'MedievalSharp', 'Times New Roman', serif";const h=document.createElement("div");h.style.background="linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",h.style.padding="28px 0 18px 0",h.style.textAlign="center",h.style.color="#fff",h.style.fontSize="2.1rem",h.style.fontWeight="bold",h.style.letterSpacing="1px",h.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",h.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",h.textContent="New Game",c.appendChild(h);const b=document.createElement("div");b.style.display="flex",b.style.flex="1",b.style.flexDirection="row",b.style.gap="0",b.style.height="100%",b.style.background="none",c.appendChild(b);const u=document.createElement("div");u.style.flex="1.1",u.style.display="flex",u.style.flexDirection="column",u.style.alignItems="center",u.style.justifyContent="center",u.style.background="linear-gradient(135deg, #232526 0%, #232526 100%)",u.style.padding="36px 16px 24px 32px",u.style.borderRight="2px solid #333",u.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",b.appendChild(u);const p=document.createElement("div");p.style.width="300px",p.style.height="200px",p.style.background="#222",p.style.border="3px solid #666",p.style.borderRadius="14px",p.style.display="flex",p.style.alignItems="center",p.style.justifyContent="center",p.style.marginBottom="16px",p.style.position="relative",p.style.overflow="hidden",u.appendChild(p);const g=document.createElement("div");g.style.border="4px solid #f3f3f3",g.style.borderTop="4px solid #888",g.style.borderRadius="50%",g.style.width="36px",g.style.height="36px",g.style.animation="spin 1s linear infinite",g.style.position="absolute",g.style.left="calc(50% - 18px)",g.style.top="calc(50% - 18px)",p.appendChild(g);const l=document.createElement("button");l.textContent="Recreate Map";let z=0,w=null,R=null,v=null;function D(){z++,w&&w.terminate(),w=new Worker(new URL("/Armchair-General/assets/mapWorker-mTmlUHEf.js",import.meta.url),{type:"module"}),g.style.display="block",v&&p.removeChild(v);const d=z;w.onmessage=C=>{if(d!==z)return;const{map:o,countries:x}=C.data.result,t=x.map(y=>{const E=new U(y.name,y.owner,y.armies,y.income);return E.coordinates=y.coordinates,E.border=y.border,E.oceanBorder=y.oceanBorder,E.color=y.color,E}),e=new Map(t.map(y=>[y.name,y]));x.forEach((y,E)=>{t[E].neighbors=(y.neighbors||[]).map(J=>e.get(J.name)).filter(Boolean)});const H=Object.assign(Object.create(O.prototype),{map:o,countries:t});if(O.checkMapCountryConsistency(o,t)||console.warn("[WorldMap] Consistency check failed after reconstructing from worker!"),R=H,!R)throw new Error("WorldMap is null when rendering map preview.");v=Q.render(R,[],[],!0),v.style.width="300px",v.style.height="200px",v.style.display="block",g.style.display="none",p.appendChild(v),w==null||w.terminate(),w=null},w.postMessage({type:"generate",width:1200,height:800,countryCount:40})}l.onclick=D,D(),l.style.margin="0 0 0 0",l.style.padding="10px 20px",l.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",l.style.color="#fff",l.style.border="none",l.style.borderRadius="8px",l.style.fontWeight="bold",l.style.fontSize="1rem",l.style.cursor="pointer",l.style.marginTop="4px",l.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",l.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",l.onmouseenter=()=>l.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",l.onmouseleave=()=>l.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",u.appendChild(l);const m=document.createElement("div");m.style.flex="1.5",m.style.display="flex",m.style.flexDirection="column",m.style.alignItems="stretch",m.style.justifyContent="flex-start",m.style.padding="36px 32px 24px 24px",m.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",b.appendChild(m);let k=[];const G=["Augustus","Charlemagne","Qin Shi Huang","Akbar","Justinian","Napoleon","Constantine","Ashoka","Catherine","Meiji","Trajan","Hadrian","Aurangzeb","Elizabeth","Peter","Victoria","Franz Joseph","Wilhelm","Haile Selassie","Menelik"];let B=[];function P(){B.length>=G.length&&(B=[]);const d=G.filter(o=>!B.includes(o)),C=d[Math.floor(Math.random()*d.length)];return B.push(C),C}const S=document.createElement("div");S.textContent="Players",S.style.fontWeight="bold",S.style.fontSize="1.1rem",S.style.color="#fff",S.style.marginBottom="8px",S.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",m.appendChild(S);const f=document.createElement("ul");f.style.listStyle="none",f.style.padding="0",f.style.margin="0 0 14px 0",f.style.background="rgba(36,40,44,0.93)",f.style.border="1px solid #333",f.style.borderRadius="8px",f.style.maxHeight="160px",f.style.overflowY="auto",f.style.boxShadow="0 2px 8px rgba(30,32,34,0.10)",f.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",m.appendChild(f);function M(){f.innerHTML="",k.forEach((d,C)=>{const o=document.createElement("li");o.style.display="flex",o.style.alignItems="center",o.style.marginBottom="6px",o.style.color="#fff",o.style.background="rgba(60,70,80,0.18)",o.style.borderRadius="6px",o.style.padding="6px 10px",o.style.boxShadow="0 1px 4px rgba(30,32,34,0.09)",o.style.fontFamily="'MedievalSharp', 'Times New Roman', serif";const x=document.createElement("span");if(x.textContent=`${d.name}`,x.style.flex="1",x.style.cursor="pointer",x.style.fontWeight="bold",x.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",x.onclick=()=>{const e=document.createElement("input");e.type="text",e.value=d.name,e.style.flex="1",e.style.fontWeight="bold",e.style.fontSize="1.05rem",e.style.background="rgba(60,70,80,0.18)",e.style.color="#fff",e.style.border="none",e.style.borderBottom="2px solid #43cea2",e.style.outline="none",e.style.padding="2px 0",e.style.margin="0",e.style.borderRadius="0",e.style.transition="border-color 0.2s",e.autofocus=!0,e.style.fontSize="1.05rem",e.style.background="rgba(60,70,80,0.18)",e.style.color="#fff",e.style.border="none",e.style.borderBottom="2px solid #43cea2",e.style.outline="none",e.style.padding="2px 0",e.style.margin="0",e.style.borderRadius="0",e.style.transition="border-color 0.2s",e.autofocus=!0,o.replaceChild(e,x),e.focus(),e.select();function H(){const y=e.value.trim()||d.name;d.name=y,M(),j({map:R,players:k,showArmies:W.checked})}e.addEventListener("blur",H),e.addEventListener("keydown",y=>{y.key==="Enter"?e.blur():y.key==="Escape"&&M()})},o.appendChild(x),d.isAI){const e=document.createElement("span");e.textContent="AI",e.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",e.style.color="#fff",e.style.fontSize="0.85em",e.style.fontWeight="bold",e.style.borderRadius="3px",e.style.padding="2px 7px",e.style.marginLeft="8px",e.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",o.appendChild(e)}const t=document.createElement("button");t.textContent="âœ–",t.style.marginLeft="10px",t.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",t.style.border="none",t.style.borderRadius="4px",t.style.color="#fff",t.style.fontWeight="bold",t.style.cursor="pointer",t.style.padding="2px 8px",t.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",t.onmouseenter=()=>t.style.background="linear-gradient(90deg,#ffb74d 0%,#e57373 100%)",t.onmouseleave=()=>t.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",t.onclick=()=>{k.splice(C,1),M(),F()},o.appendChild(t),f.appendChild(o)})}const T=document.createElement("div");T.style.display="flex",T.style.gap="14px",T.style.marginBottom="18px",m.appendChild(T);const a=document.createElement("button");a.textContent="Add Human",a.style.flex="1",a.style.padding="8px 0",a.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",a.style.color="#fff",a.style.border="none",a.style.borderRadius="8px",a.style.fontWeight="bold",a.style.fontSize="1rem",a.style.cursor="pointer",a.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",a.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",a.onmouseenter=()=>a.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",a.onmouseleave=()=>a.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",a.onclick=()=>{const d=P();k.push({name:d,isAI:!1}),M(),F()},T.appendChild(a);const r=document.createElement("button");r.textContent="Add AI",r.style.flex="1",r.style.padding="8px 0",r.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",r.style.color="#fff",r.style.border="none",r.style.borderRadius="8px",r.style.fontWeight="bold",r.style.fontSize="1rem",r.style.cursor="pointer",r.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",r.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",r.onmouseenter=()=>r.style.background="linear-gradient(90deg,#ff5e62 0%,#ff9966 100%)",r.onmouseleave=()=>r.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",r.onclick=()=>{const d=P()+" AI";k.push({name:d,isAI:!0}),M(),F()},T.appendChild(r);const A=document.createElement("div");A.style.display="flex",A.style.gap="16px",A.style.marginTop="auto",m.appendChild(A);const n=document.createElement("button");n.textContent="Start Game",n.style.flex="2",n.style.padding="12px 0",n.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",n.style.color="#fff",n.style.border="none",n.style.borderRadius="8px",n.style.fontWeight="bold",n.style.fontSize="1.1rem",n.style.cursor="pointer",n.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",n.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",n.disabled=!0,n.onmouseenter=()=>n.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",n.onmouseleave=()=>n.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",A.appendChild(n);function F(){n.disabled=!1}n.onclick=()=>{!R||k.length<2||(document.body.removeChild(s),j({map:R,players:k,showArmies:W.checked}))};const i=document.createElement("button");i.textContent="Cancel",i.style.flex="1",i.style.padding="12px 0",i.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",i.style.color="#fff",i.style.border="none",i.style.borderRadius="8px",i.style.fontWeight="bold",i.style.fontSize="1.1rem",i.style.cursor="pointer",i.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",i.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",i.onmouseenter=()=>i.style.background="linear-gradient(90deg,#ffb74d 0%,#e57373 100%)",i.onmouseleave=()=>i.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",i.onclick=()=>{document.body.removeChild(s),I()},A.appendChild(i),s.onclick=d=>{d.target===s&&(document.body.removeChild(s),I())},document.addEventListener("keydown",function d(C){C.key==="Escape"&&(document.body.removeChild(s),document.removeEventListener("keydown",d),I())});const N=document.createElement("div");N.style.margin="12px 0 0 0",N.style.display="flex",N.style.alignItems="center";const W=document.createElement("input");W.type="checkbox",W.id="show-armies-checkbox",W.style.marginRight="8px";const L=document.createElement("label");L.htmlFor="show-armies-checkbox",L.textContent="Show Armies",N.appendChild(W),N.appendChild(L),m.appendChild(N),s.appendChild(c),document.body.appendChild(s),M(),F()})}export{_ as showNewGameDialog};
