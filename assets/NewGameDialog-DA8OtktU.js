import{P as z,C as V,W as Q,R as Y}from"./index-CujIlpSk.js";function q(_){return new Promise((P,O)=>{const s=document.createElement("div");s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100vw",s.style.height="100vh",s.style.background="rgba(30,32,34,0.85)",s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.zIndex="9999";const y=document.createElement("div");y.style.width="min(96vw, 1140px)",y.style.height="min(96vh, 624px)",y.style.minWidth="600px",y.style.minHeight="528px",y.style.background="linear-gradient(120deg, #232526 0%, #414345 100%)",y.style.borderRadius="20px",y.style.boxShadow="0 12px 48px rgba(0,0,0,0.55)",y.style.display="flex",y.style.flexDirection="column",y.style.alignItems="stretch",y.style.justifyContent="flex-start",y.style.padding="0",y.style.overflow="hidden",y.style.fontFamily="'MedievalSharp', 'Times New Roman', serif";const C=document.createElement("div");C.style.background="linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",C.style.padding="28px 0 18px 0",C.style.textAlign="center",C.style.color="#fff",C.style.fontSize="2.1rem",C.style.fontWeight="bold",C.style.letterSpacing="1px",C.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",C.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",C.textContent="New Game",y.appendChild(C);const v=document.createElement("div");v.style.display="flex",v.style.flex="1",v.style.flexDirection="row",v.style.gap="0",v.style.height="100%",v.style.background="none",y.appendChild(v);const u=document.createElement("div");u.style.flex="2.2",u.style.display="flex",u.style.flexDirection="column",u.style.alignItems="center",u.style.justifyContent="center",u.style.background="linear-gradient(135deg, #232526 0%, #232526 100%)",u.style.padding="36px 16px 24px 32px",u.style.borderRight="2px solid #333",u.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",v.appendChild(u);const c=document.createElement("div");c.style.width="585px",c.style.height="312px",c.style.background="#222",c.style.border="3px solid #666",c.style.borderRadius="14px",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.marginBottom="16px",c.style.position="relative",c.style.overflow="hidden",u.appendChild(c);const h=document.createElement("div");h.style.border="4px solid #f3f3f3",h.style.borderTop="4px solid #888",h.style.borderRadius="50%",h.style.width="36px",h.style.height="36px",h.style.animation="spin 1s linear infinite",h.style.position="absolute",h.style.left="calc(50% - 18px)",h.style.top="calc(50% - 18px)",c.appendChild(h);const l=document.createElement("button");l.textContent="Recreate Map";let j=0,S=null,M=null,R=null;function D(){j++,S&&S.terminate(),S=new Worker(new URL("/Armchair-General/assets/mapWorker-C4NOts9s.js",import.meta.url),{type:"module"}),h.style.display="block",R&&c.removeChild(R);const o=j;S.onmessage=x=>{if(o!==j)return;const{map:t,countries:k}=x.data.result,g=k.map(p=>{const b=new V(p.name,p.owner,p.armies,p.income);return b.coordinates=p.coordinates,b.border=p.border,b.oceanBorder=p.oceanBorder,b.color=p.color,b}),d=new Map(g.map(p=>[p.name,p]));k.forEach((p,b)=>{g[b].neighbors=(p.neighbors||[]).map(U=>d.get(U.name)).filter(Boolean)});const e=Object.assign(Object.create(Q.prototype),{map:t,countries:g});if(Q.checkMapCountryConsistency(t,g)||console.warn("[WorldMap] Consistency check failed after reconstructing from worker!"),M=e,!M)throw new Error("WorldMap is null when rendering map preview.");R=Y.render(M,[],[],!0),R.style.width="585px",R.style.height="312px",R.style.display="block",h.style.display="none",c.appendChild(R),S==null||S.terminate(),S=null},S.postMessage({type:"generate",width:1200,height:800,countryCount:40})}l.onclick=D,D(),l.style.margin="0 0 0 0",l.style.padding="10px 20px",l.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",l.style.color="#fff",l.style.border="none",l.style.borderRadius="8px",l.style.fontWeight="bold",l.style.fontSize="1rem",l.style.cursor="pointer",l.style.marginTop="4px",l.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",l.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",l.onmouseenter=()=>l.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",l.onmouseleave=()=>l.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",u.appendChild(l);const m=document.createElement("div");m.style.flex="1.5",m.style.display="flex",m.style.flexDirection="column",m.style.alignItems="stretch",m.style.justifyContent="flex-start",m.style.padding="36px 32px 24px 24px",m.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",v.appendChild(m);let w=[],B=0;const G=["Augustus","Charlemagne","Qin Shi Huang","Akbar","Justinian","Napoleon","Constantine","Ashoka","Catherine","Meiji","Trajan","Hadrian","Aurangzeb","Elizabeth","Peter","Victoria","Franz Joseph","Wilhelm","Haile Selassie","Menelik"];let F=[];function J(){F.length>=G.length&&(F=[]);const o=G.filter(t=>!F.includes(t)),x=o[Math.floor(Math.random()*o.length)];return F.push(x),x}const E=document.createElement("div");E.textContent="Players",E.style.fontWeight="bold",E.style.fontSize="1.1rem",E.style.color="#fff",E.style.marginBottom="8px",E.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",m.appendChild(E);const f=document.createElement("ul");f.style.listStyle="none",f.style.padding="0",f.style.margin="0 0 14px 0",f.style.background="rgba(36,40,44,0.93)",f.style.border="1px solid #333",f.style.borderRadius="8px",f.style.maxHeight="320px",f.style.overflowY="auto",f.style.boxShadow="0 2px 8px rgba(30,32,34,0.10)",f.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",m.appendChild(f);function N(){f.innerHTML="",w.forEach((o,x)=>{const t=document.createElement("li");t.style.display="flex",t.style.alignItems="center",t.style.marginBottom="6px",t.style.color="#fff",t.style.background="rgba(60,70,80,0.18)",t.style.borderRadius="6px",t.style.padding="6px 10px",t.style.boxShadow="0 1px 4px rgba(30,32,34,0.09)",t.style.fontFamily="'MedievalSharp', 'Times New Roman', serif";const k=document.createElement("span");k.style.display="inline-block",k.style.width="18px",k.style.height="18px",k.style.borderRadius="4px",k.style.background=o.color,k.style.marginRight="10px",k.style.border="2px solid #222",t.appendChild(k);const g=document.createElement("span");if(g.textContent=`${o.name}`,g.style.flex="1",g.style.cursor="pointer",g.style.fontWeight="bold",g.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",g.onclick=()=>{const e=document.createElement("input");e.type="text",e.value=o.name,e.style.flex="1",e.style.fontWeight="bold",e.style.fontSize="1.05rem",e.style.background="rgba(60,70,80,0.18)",e.style.color="#fff",e.style.border="none",e.style.borderBottom="2px solid #43cea2",e.style.outline="none",e.style.padding="2px 0",e.style.margin="0",e.style.borderRadius="0",e.style.transition="border-color 0.2s",e.autofocus=!0,e.style.fontSize="1.05rem",e.style.background="rgba(60,70,80,0.18)",e.style.color="#fff",e.style.border="none",e.style.borderBottom="2px solid #43cea2",e.style.outline="none",e.style.padding="2px 0",e.style.margin="0",e.style.borderRadius="0",e.style.transition="border-color 0.2s",e.autofocus=!0,t.replaceChild(e,g),e.focus(),e.select();function p(){const b=e.value.trim()||o.name;o.name=b,N(),P({map:M,players:w,showArmies:W.checked})}e.addEventListener("blur",p),e.addEventListener("keydown",b=>{b.key==="Enter"?e.blur():b.key==="Escape"&&N()})},t.appendChild(g),o.isAI){const e=document.createElement("span");e.textContent="AI",e.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",e.style.color="#fff",e.style.fontSize="0.85em",e.style.fontWeight="bold",e.style.borderRadius="3px",e.style.padding="2px 7px",e.style.marginLeft="8px",e.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",t.appendChild(e)}const d=document.createElement("button");d.textContent="âœ–",d.style.marginLeft="10px",d.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",d.style.border="none",d.style.borderRadius="4px",d.style.color="#fff",d.style.fontWeight="bold",d.style.cursor="pointer",d.style.padding="2px 8px",d.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",d.onmouseenter=()=>d.style.background="linear-gradient(90deg,#ffb74d 0%,#e57373 100%)",d.onmouseleave=()=>d.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",d.onclick=()=>{w.splice(x,1),N(),I()},t.appendChild(d),f.appendChild(t)})}const A=document.createElement("div");A.style.display="flex",A.style.gap="14px",A.style.marginBottom="18px",m.appendChild(A);const a=document.createElement("button");a.textContent="Add Human",a.style.flex="1",a.style.padding="8px 0",a.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",a.style.color="#fff",a.style.border="none",a.style.borderRadius="8px",a.style.fontWeight="bold",a.style.fontSize="1rem",a.style.cursor="pointer",a.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",a.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",a.onmouseenter=()=>a.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",a.onmouseleave=()=>a.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",a.onclick=()=>{if(w.length>=8)return;const o=J(),x=z.COLORS[B%z.COLORS.length],t={name:o,isAI:!1,color:x};w.length<8&&(w.push(t),B++,N(),I())},A.appendChild(a);const r=document.createElement("button");r.textContent="Add AI",r.style.flex="1",r.style.padding="8px 0",r.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",r.style.color="#fff",r.style.border="none",r.style.borderRadius="8px",r.style.fontWeight="bold",r.style.fontSize="1rem",r.style.cursor="pointer",r.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",r.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",r.onmouseenter=()=>r.style.background="linear-gradient(90deg,#ff5e62 0%,#ff9966 100%)",r.onmouseleave=()=>r.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",r.onclick=()=>{if(w.length>=8)return;const o=J()+" AI",x=z.COLORS[B%z.COLORS.length],t={name:o,isAI:!0,color:x};w.length<8&&(w.push(t),B++,N(),I())},A.appendChild(r);const T=document.createElement("div");T.style.display="flex",T.style.gap="16px",T.style.marginTop="auto",m.appendChild(T);const n=document.createElement("button");n.textContent="Start Game",n.style.flex="2",n.style.padding="12px 0",n.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",n.style.color="#fff",n.style.border="none",n.style.borderRadius="8px",n.style.fontWeight="bold",n.style.fontSize="1.1rem",n.style.cursor="pointer",n.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",n.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",n.disabled=!0,n.onmouseenter=()=>n.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",n.onmouseleave=()=>n.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",T.appendChild(n);function I(){n.disabled=!1}n.onclick=()=>{!M||w.length<2||(document.body.removeChild(s),P({map:M,players:w,showArmies:W.checked}))};const i=document.createElement("button");i.textContent="Cancel",i.style.flex="1",i.style.padding="12px 0",i.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",i.style.color="#fff",i.style.border="none",i.style.borderRadius="8px",i.style.fontWeight="bold",i.style.fontSize="1.1rem",i.style.cursor="pointer",i.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",i.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",i.onmouseenter=()=>i.style.background="linear-gradient(90deg,#ffb74d 0%,#e57373 100%)",i.onmouseleave=()=>i.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",i.onclick=()=>{document.body.removeChild(s),O()},T.appendChild(i),s.onclick=o=>{o.target===s&&(document.body.removeChild(s),O())},document.addEventListener("keydown",function o(x){x.key==="Escape"&&(document.body.removeChild(s),document.removeEventListener("keydown",o),O())});const L=document.createElement("div");L.style.margin="12px 0 0 0",L.style.display="flex",L.style.alignItems="center";const W=document.createElement("input");W.type="checkbox",W.id="show-armies-checkbox",W.style.marginRight="8px";const H=document.createElement("label");H.htmlFor="show-armies-checkbox",H.textContent="Show Armies",L.appendChild(W),L.appendChild(H),m.appendChild(L),s.appendChild(y),document.body.appendChild(s),N(),I()})}export{q as showNewGameDialog};
