var u=Object.defineProperty;var l=(s,e,t)=>e in s?u(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var o=(s,e,t)=>l(s,typeof e!="symbol"?e+"":e,t);const i=class i{constructor(e,t,n=[],r=null,h=[],m=0,c=!1){o(this,"actionsLeft",i.ACTIONS_PER_TURN);o(this,"game");o(this,"actionLog",[]);o(this,"name");o(this,"color");o(this,"ownedCountries");o(this,"homeCountry");o(this,"isAI");o(this,"AI");o(this,"money");o(this,"knowledge");o(this,"plannedFortifications",[]);o(this,"aggressivity");this.name=e,this.color=t,this.ownedCountries=n,this.homeCountry=r,this.knowledge=h,this.money=m,this.isAI=c,this.actionsLeft=i.ACTIONS_PER_TURN,this.aggressivity=Math.floor(Math.random()*8)+2}resetActions(){this.actionsLeft=i.ACTIONS_PER_TURN}useAction(){this.actionsLeft>0&&this.actionsLeft--}get RGBColor(){return i.COLOR_RGBS[this.color]||"0,0,0"}getKnownCountries(){const e=new Set;this.knowledge.forEach(n=>e.add(n.country));const t=Array.from(e).filter(n=>!this.ownedCountries.includes(n));return{owned:[...this.ownedCountries],known:t}}getCountryInfo(e,t){if(e.owner===this)return{name:e.name,owner:e.owner,income:e.income,army:e.armies,recency:0};{const n=this.knowledge.find(r=>r.country===e);return{name:e.name,owner:e.owner,income:n?n.income:void 0,army:n?n.army:void 0,recency:n?t-n.gameTurn:void 0}}}totalIncome(){return this.ownedCountries.reduce((e,t)=>e+(t.income??0),0)}totalArmies(){return this.ownedCountries.reduce((e,t)=>e+(t.armies??0),0)}startTurn(){this.resetActions()}get IncomeShare(){if(!this.game||!this.game.players||this.game.players.length===0)return 0;const e=this.game.players.reduce((t,n)=>{var r;return t+(((r=n.totalIncome)==null?void 0:r.call(n))??0)},0);return e===0?0:this.totalIncome()/e}armyKnown(e){if(e.owner===this)return!0;const t=this.knowledge.find(n=>n.country===e);return!!(!e.owner&&t||e.owner&&e.owner!==this&&t&&this.game&&t.gameTurn===this.game.gameTurn)}};o(i,"ACTIONS_PER_TURN",5),o(i,"COLOR_RGBS",{red:"255,0,0",blue:"0,0,255",green:"0,128,0",yellow:"255,255,0"}),o(i,"COLORS",["red","blue","green","yellow"]);let a=i;export{a as Player};
