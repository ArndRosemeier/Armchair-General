import{C as P,W as j,R as $}from"./index-DdtXg8yR.js";function Y(O){return new Promise((D,W)=>{const o=document.createElement("div");o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100vw",o.style.height="100vh",o.style.background="rgba(30,32,34,0.85)",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.zIndex="9999";const d=document.createElement("div");d.style.width="min(96vw, 760px)",d.style.height="min(96vh, 520px)",d.style.minWidth="600px",d.style.minHeight="440px",d.style.background="linear-gradient(120deg, #232526 0%, #414345 100%)",d.style.borderRadius="20px",d.style.boxShadow="0 12px 48px rgba(0,0,0,0.55)",d.style.display="flex",d.style.flexDirection="column",d.style.alignItems="stretch",d.style.justifyContent="flex-start",d.style.padding="0",d.style.overflow="hidden",d.style.fontFamily="'MedievalSharp', 'Times New Roman', serif";const x=document.createElement("div");x.style.background="linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",x.style.padding="28px 0 18px 0",x.style.textAlign="center",x.style.color="#fff",x.style.fontSize="2.1rem",x.style.fontWeight="bold",x.style.letterSpacing="1px",x.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",x.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",x.textContent="New Game",d.appendChild(x);const h=document.createElement("div");h.style.display="flex",h.style.flex="1",h.style.flexDirection="row",h.style.gap="0",h.style.height="100%",h.style.background="none",d.appendChild(h);const g=document.createElement("div");g.style.flex="1.1",g.style.display="flex",g.style.flexDirection="column",g.style.alignItems="center",g.style.justifyContent="center",g.style.background="linear-gradient(135deg, #232526 0%, #232526 100%)",g.style.padding="36px 16px 24px 32px",g.style.borderRight="2px solid #333",g.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",h.appendChild(g);const p=document.createElement("div");p.style.width="300px",p.style.height="200px",p.style.background="#222",p.style.border="3px solid #666",p.style.borderRadius="14px",p.style.display="flex",p.style.alignItems="center",p.style.justifyContent="center",p.style.marginBottom="16px",p.style.position="relative",p.style.overflow="hidden",g.appendChild(p);const u=document.createElement("div");u.style.border="4px solid #f3f3f3",u.style.borderTop="4px solid #888",u.style.borderRadius="50%",u.style.width="36px",u.style.height="36px",u.style.animation="spin 1s linear infinite",u.style.position="absolute",u.style.left="calc(50% - 18px)",u.style.top="calc(50% - 18px)",p.appendChild(u);const l=document.createElement("button");l.textContent="Recreate Map";let F=0,w=null,R=null,C=null;function H(){F++,w&&w.terminate(),w=new Worker(new URL("/Armchair-General/assets/mapWorker-mTmlUHEf.js",import.meta.url),{type:"module"}),u.style.display="block",C&&p.removeChild(C);const c=F;w.onmessage=B=>{if(c!==F)return;const{map:y,countries:b}=B.data.result,t=b.map(i=>{const S=new P(i.name,i.owner,i.armies,i.income);return S.coordinates=i.coordinates,S.border=i.border,S.oceanBorder=i.oceanBorder,S.color=i.color,S}),e=new Map(t.map(i=>[i.name,i]));b.forEach((i,S)=>{t[S].neighbors=(i.neighbors||[]).map(G=>e.get(G.name)).filter(Boolean)});const z=Object.assign(Object.create(j.prototype),{map:y,countries:t});if(j.checkMapCountryConsistency(y,t)||console.warn("[WorldMap] Consistency check failed after reconstructing from worker!"),R=z,!R)throw new Error("WorldMap is null when rendering map preview.");C=$.render(R,[],[],!0),C.style.width="300px",C.style.height="200px",C.style.display="block",u.style.display="none",p.appendChild(C),w==null||w.terminate(),w=null},w.postMessage({type:"generate",width:1200,height:800,countryCount:40})}l.onclick=H,H(),l.style.margin="0 0 0 0",l.style.padding="10px 20px",l.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",l.style.color="#fff",l.style.border="none",l.style.borderRadius="8px",l.style.fontWeight="bold",l.style.fontSize="1rem",l.style.cursor="pointer",l.style.marginTop="4px",l.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",l.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",l.onmouseenter=()=>l.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",l.onmouseleave=()=>l.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",g.appendChild(l);const m=document.createElement("div");m.style.flex="1.5",m.style.display="flex",m.style.flexDirection="column",m.style.alignItems="stretch",m.style.justifyContent="flex-start",m.style.padding="36px 32px 24px 24px",m.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",h.appendChild(m);let v=[];const k=document.createElement("div");k.textContent="Players",k.style.fontWeight="bold",k.style.fontSize="1.1rem",k.style.color="#fff",k.style.marginBottom="8px",k.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",m.appendChild(k);const f=document.createElement("ul");f.style.listStyle="none",f.style.padding="0",f.style.margin="0 0 14px 0",f.style.background="rgba(36,40,44,0.93)",f.style.border="1px solid #333",f.style.borderRadius="8px",f.style.maxHeight="160px",f.style.overflowY="auto",f.style.boxShadow="0 2px 8px rgba(30,32,34,0.10)",f.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",m.appendChild(f);function E(){f.innerHTML="",v.forEach((c,B)=>{const y=document.createElement("li");y.style.display="flex",y.style.alignItems="center",y.style.marginBottom="6px",y.style.color="#fff",y.style.background="rgba(60,70,80,0.18)",y.style.borderRadius="6px",y.style.padding="6px 10px",y.style.boxShadow="0 1px 4px rgba(30,32,34,0.09)",y.style.fontFamily="'MedievalSharp', 'Times New Roman', serif";const b=document.createElement("span");if(b.textContent=`${c.name}`,b.style.flex="1",b.style.cursor="pointer",b.style.fontWeight="bold",b.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",b.onclick=()=>{const e=document.createElement("input");e.type="text",e.value=c.name,e.style.flex="1",e.style.fontWeight="bold",e.style.fontSize="1.05rem",e.style.background="rgba(60,70,80,0.18)",e.style.color="#fff",e.style.border="none",e.style.borderBottom="2px solid #43cea2",e.style.outline="none",e.style.padding="2px 0",e.style.margin="0",e.style.borderRadius="0",e.style.transition="border-color 0.2s",e.autofocus=!0,e.style.fontSize="1.05rem",e.style.background="rgba(60,70,80,0.18)",e.style.color="#fff",e.style.border="none",e.style.borderBottom="2px solid #43cea2",e.style.outline="none",e.style.padding="2px 0",e.style.margin="0",e.style.borderRadius="0",e.style.transition="border-color 0.2s",e.autofocus=!0,y.replaceChild(e,b),e.focus(),e.select();function z(){const i=e.value.trim()||c.name;c.name=i,E(),D({map:R,players:v,showArmies:N.checked})}e.addEventListener("blur",z),e.addEventListener("keydown",i=>{i.key==="Enter"?e.blur():i.key==="Escape"&&E()})},y.appendChild(b),c.isAI){const e=document.createElement("span");e.textContent="AI",e.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",e.style.color="#fff",e.style.fontSize="0.85em",e.style.fontWeight="bold",e.style.borderRadius="3px",e.style.padding="2px 7px",e.style.marginLeft="8px",e.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",y.appendChild(e)}const t=document.createElement("button");t.textContent="âœ–",t.style.marginLeft="10px",t.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",t.style.border="none",t.style.borderRadius="4px",t.style.color="#fff",t.style.fontWeight="bold",t.style.cursor="pointer",t.style.padding="2px 8px",t.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",t.onmouseenter=()=>t.style.background="linear-gradient(90deg,#ffb74d 0%,#e57373 100%)",t.onmouseleave=()=>t.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",t.onclick=()=>{v.splice(B,1),E(),I()},y.appendChild(t),f.appendChild(y)})}const M=document.createElement("div");M.style.display="flex",M.style.gap="14px",M.style.marginBottom="18px",m.appendChild(M);const s=document.createElement("button");s.textContent="Add Human",s.style.flex="1",s.style.padding="8px 0",s.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",s.style.color="#fff",s.style.border="none",s.style.borderRadius="8px",s.style.fontWeight="bold",s.style.fontSize="1rem",s.style.cursor="pointer",s.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",s.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",s.onmouseenter=()=>s.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",s.onmouseleave=()=>s.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",s.onclick=()=>{v.push({name:`Human ${v.filter(c=>!c.isAI).length+1}`,isAI:!1}),E(),I()},M.appendChild(s);const a=document.createElement("button");a.textContent="Add AI",a.style.flex="1",a.style.padding="8px 0",a.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",a.style.color="#fff",a.style.border="none",a.style.borderRadius="8px",a.style.fontWeight="bold",a.style.fontSize="1rem",a.style.cursor="pointer",a.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",a.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",a.onmouseenter=()=>a.style.background="linear-gradient(90deg,#ff5e62 0%,#ff9966 100%)",a.onmouseleave=()=>a.style.background="linear-gradient(90deg,#ff9966 0%,#ff5e62 100%)",a.onclick=()=>{v.push({name:`AI ${v.filter(c=>c.isAI).length+1}`,isAI:!0}),E(),I()},M.appendChild(a);const T=document.createElement("div");T.style.display="flex",T.style.gap="16px",T.style.marginTop="auto",m.appendChild(T);const n=document.createElement("button");n.textContent="Start Game",n.style.flex="2",n.style.padding="12px 0",n.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",n.style.color="#fff",n.style.border="none",n.style.borderRadius="8px",n.style.fontWeight="bold",n.style.fontSize="1.1rem",n.style.cursor="pointer",n.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",n.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",n.disabled=!0,n.onmouseenter=()=>n.style.background="linear-gradient(90deg,#185a9d 0%,#43cea2 100%)",n.onmouseleave=()=>n.style.background="linear-gradient(90deg,#43cea2 0%,#185a9d 100%)",T.appendChild(n);function I(){n.disabled=!1}n.onclick=()=>{!R||v.length<2||(document.body.removeChild(o),D({map:R,players:v,showArmies:N.checked}))};const r=document.createElement("button");r.textContent="Cancel",r.style.flex="1",r.style.padding="12px 0",r.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",r.style.color="#fff",r.style.border="none",r.style.borderRadius="8px",r.style.fontWeight="bold",r.style.fontSize="1.1rem",r.style.cursor="pointer",r.style.boxShadow="0 2px 8px rgba(30,32,34,0.13)",r.style.fontFamily="'MedievalSharp', 'Times New Roman', serif",r.onmouseenter=()=>r.style.background="linear-gradient(90deg,#ffb74d 0%,#e57373 100%)",r.onmouseleave=()=>r.style.background="linear-gradient(90deg,#e57373 0%,#ffb74d 100%)",r.onclick=()=>{document.body.removeChild(o),W()},T.appendChild(r),o.onclick=c=>{c.target===o&&(document.body.removeChild(o),W())},document.addEventListener("keydown",function c(B){B.key==="Escape"&&(document.body.removeChild(o),document.removeEventListener("keydown",c),W())});const A=document.createElement("div");A.style.margin="12px 0 0 0",A.style.display="flex",A.style.alignItems="center";const N=document.createElement("input");N.type="checkbox",N.id="show-armies-checkbox",N.style.marginRight="8px";const L=document.createElement("label");L.htmlFor="show-armies-checkbox",L.textContent="Show Armies",A.appendChild(N),A.appendChild(L),m.appendChild(A),o.appendChild(d),document.body.appendChild(o),E(),I()})}export{Y as showNewGameDialog};
